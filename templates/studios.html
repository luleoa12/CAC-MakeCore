{% extends 'base.html' %}
{% block head %}
  <link rel="stylesheet" href="/static/css/studios.css">
  <link rel="stylesheet" href="/static/css/studio_detail.css">
  <style>
    .studio-card-grid {
      margin-bottom: 20px;
    }
    
    .studio-card-link {
      display: block;
      text-decoration: none;
      color: inherit;
      width: 240px;
      margin: 0 auto;
    }
    
    .project-image-container {
      width: 240px;
      height: 180px;
      border-top-left-radius: 5px;
      border-top-right-radius: 5px;
      overflow: hidden;
      margin-bottom: 0px;
    }
    
    .project-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }
    
    .project-image-placeholder {
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #ff6b35, #e55a2b);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 2rem;
    }
    
    .project-card-content {
      padding: 0;
    }
    
    .project-info {
      text-align: center;
    }
    
    .project-title {
      color: var(--color7);
      font-size: 1.1rem;
      font-weight: 600;
      font-family: 'Fira Code', monospace;
      line-height: 1.3;
      margin-bottom: 0;
      margin-top: 0;
      word-wrap: break-word;
      margin-top: 10px;
      height: 30px;
    }
    
    .developer-username {
      color: var(--color6);
      font-size: 0.9rem;
      font-family: 'Fira Code', monospace;
      display: block;
    }
  </style>
{% endblock %}

{% block content %}
<div style="max-width: 1200px; margin: 0 auto;">
  <h1 class="studio-title" style="font-size:2.6rem; margin-bottom:36px; text-align:center;"></h1>
  <div class="studio-grid">
    {% set studios_in_row = 4 %}
    {% set total = public_studios|length %}
    {% for i in range(0, total, studios_in_row) %}
      <div class="studio-row">
        {% for studio in public_studios[i:i+studios_in_row] %}
          <div class="studio-card-grid">
            <a href="{{ url_for('studio_detail', studio_id=studio.id) }}" class="studio-card-link">
              <div class="project-image-container">
                {% if studio.thumbnail_url %}
                  <img src="{{ studio.thumbnail_url }}" alt="{{ studio.title }}" class="project-image" loading="lazy">
                {% else %}
                  <img data-theme-src="/static/themes/orange/img/studio_default.svg" alt="{{ studio.title }}" class="project-image" loading="lazy">
                {% endif %}
              </div>
              <div class="project-card-content">
                <div class="project-info">
                  <h3 class="project-title studio-card-title" style="color: var(--color27);" title="{{ studio.title }}">
                    {{ studio.title|truncate(20, true, '...') }}
                  </h3>
                </div>
              </div>
            </a>
          </div>
        {% endfor %}

      </div>
    {% endfor %}
    {% if public_studios|length == 0 %}
      <div style="color:var(--color4); font-size:1.2rem; margin-top:40px; text-align:center;">No public studios yet.</div>
    {% endif %}
  </div>
</div>
{% endblock %}
{% block scripts %}
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7H9JTC8BY1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-7H9JTC8BY1');
</script>
{% endblock %}
